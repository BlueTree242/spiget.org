window.RequestsPerMinute={rpm:60,lastTotal:-1,queries:0,getTotal:function(a){$.ajax({url:"https://api.spiget.org/v2/metrics/requests/1?spiget__ua=SpigetRPM&callback=?",dataType:"jsonp",success:function(b){RequestsPerMinute.queries++;$.each(b,function(b,d){a(d.total)})}})},updateElements:function(){animateRPMValue($(".rpm-display"),RequestsPerMinute.rpm,1500)},blinkElements:function(){var a=60/Math.max(RequestsPerMinute.rpm,1)*1E3;3E4<a&&(a=1E4);$(".rpm-display.blink").addClass("active");setTimeout(function(){$(".rpm-display.blink").removeClass("active")},
a/2);setTimeout(function(){RequestsPerMinute.blinkElements()},a)},refresh:function(){RequestsPerMinute.getTotal(function(a){if(0<RequestsPerMinute.lastTotal){var b=6*(a-RequestsPerMinute.lastTotal);RequestsPerMinute.rpm=0==RequestsPerMinute.queries%6?b:(RequestsPerMinute.rpm+b)/2;console.info("RPM: "+RequestsPerMinute.rpm)}RequestsPerMinute.lastTotal=a;RequestsPerMinute.updateElements()})}};RequestsPerMinute.refresh();
var refreshInterval=0,refreshInterval=setInterval(function(){RequestsPerMinute.refresh()},1E4);$(window).on("focus",function(){0===refreshInterval&&(refreshInterval=setInterval(function(){RequestsPerMinute.refresh()},1E4))});$(window).on("blur",function(){clearInterval(refreshInterval);refreshInterval=0});setTimeout(function(){RequestsPerMinute.blinkElements()},1E4);
function animateRPMValue(a,b,c){void 0===a.prop("counter")&&a.prop("counter",0);a.animate({counter:b},{duration:c,easing:"swing",step:function(b){$(a).text(Math.ceil(b))}})};
