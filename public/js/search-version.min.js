angular.module("searchApp",[]).controller("SearchController",["$scope",function(e){var t=this;t.method=method,t.query=query,t.limit=null!=limit&&0<limit?limit:10,t.resultSize=0,t.doSearch=function(){1<t.query.length&&((null==t.limit||t.limit<0)&&(t.limit=10),$(".loading-icon").fadeIn(),$("#raw-result-container").empty(),$("#result-container").empty(),window.history.pushState("","","/search/version/"+t.method+":"+t.query+"/"+t.limit),t.resultSize=0,$.ajax({url:"https://api.spiget.org/v2/resources/for/"+t.query+"/"+t.method+"?spiget___ua=SpigetSearchVersion&size="+t.limit+"&callback=?",success:function(e){$(".loading-icon").fadeOut(),Alert.alert("success","",!1),t.resultSize=e.match.length,t.apply(),$("#raw-result-container").html("<pre>"+JSON.stringify(e,null,4)+"</pre>"),$container=$("#result-container"),$container.empty(),$.each(e.match,function(e,t){var i="";$.each(t.testedVersions,function(e,t){i+=t+", "}),i=i.substring(0,i.length-2),$container.append("<div class='panel panel-info resource-panel'>\t<div class='panel-heading'>\t\t<a href='https://api.spiget.org/v2/resources/"+t.id+"/go' target='_blank'>"+t.name+"</a><span class='pull-right text-muted'>#"+t.id+"</span>\t</div>\t<div class='panel-body'>\t\t<strong>Tested with: </strong><span>"+i+"</span>\t</div></div><br/>")})},error:function(e){$(".loading-icon").fadeOut(),console.log(e),404==e.status?Alert.alert("warning","Nothing found",!0):Alert.alert("danger","Search failed",!0)}}))};var i=-1;t.delayedSearch=function(){-1!=i&&clearTimeout(i),i=setTimeout(function(){t.doSearch(),i=-1},250)},t.apply=function(){e.$apply()},setTimeout(function(){t.doSearch()},500)}]);