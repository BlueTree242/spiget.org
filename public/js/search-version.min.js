angular.module("searchApp",[]).controller("SearchController",["$scope",function(e){var a=this;a.method=method;a.query=query;a.limit=void 0!=limit&&0<limit?limit:10;a.resultSize=0;a.doSearch=function(){if(1<a.query.length){if(void 0==a.limit||0>a.limit)a.limit=10;$(".loading-icon").fadeIn();$("#raw-result-container").empty();$("#result-container").empty();window.history.pushState("","","/search/version/"+a.method+":"+a.query+"/"+a.limit);a.resultSize=0;$.ajax({url:"https://api.spiget.org/v2/resources/for/"+
a.query+"/"+a.method+"?spiget__ua=SpigetSearchVersion&size="+a.limit+"&callback=?",dataType:"jsonp",success:function(b){$(".loading-icon").fadeOut();Alert.alert("success","",!1);a.resultSize=b.match.length;a.apply();$("#raw-result-container").html("<pre>"+JSON.stringify(b,null,4)+"</pre>");$container=$("#result-container");$container.empty();$.each(b.match,function(a,b){var c="";$.each(b.testedVersions,function(a,b){c+=b+", "});c=c.substring(0,c.length-2);$container.append("<div class='panel panel-info resource-panel'>\t<div class='panel-heading'>\t\t<a href='https://api.spiget.org/v2/resources/"+
b.id+"/go' target='_blank'>"+b.name+"</a><span class='pull-right text-muted'>#"+b.id+"</span>\t</div>\t<div class='panel-body'>\t\t<strong>Tested with: </strong><span>"+c+"</span>\t</div></div><br/>")})},error:function(a){$(".loading-icon").fadeOut();console.log(a);404==a.status?Alert.alert("warning","Nothing found",!0):Alert.alert("danger","Search failed",!0)}})}};var d=-1;a.delayedSearch=function(){-1!=d&&clearTimeout(d);d=setTimeout(function(){a.doSearch();d=-1},250)};a.apply=function(){e.$apply()};
(function(){setTimeout(function(){a.doSearch()},500)})()}]);
