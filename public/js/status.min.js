window.SpigetStatus={options:{icons:{checking:"glyphicon glyphicon-question-sign",up:"glyphicon glyphicon-ok-sign",down:"glyphicon glyphicon-remove-sign"},colors:{checking:"gray",up:"#00b900",down:"red"}},display:{checking:function(a){a.removeClass();a.css("color",window.SpigetStatus.options.colors.checking);a.addClass(window.SpigetStatus.options.icons.checking)},up:function(a){a.removeClass();a.css("color",window.SpigetStatus.options.colors.up);a.addClass(window.SpigetStatus.options.icons.up)},down:function(a){a.removeClass();
a.css("color",window.SpigetStatus.options.colors.down);a.addClass(window.SpigetStatus.options.icons.down)}},servers:[{name:"aqua",color:"aqua",url:"https://aqua.api.spiget.org",apiKey:"m778498607-51f8a0a2cba2102642c5264c"},{name:"orange",color:"orange",url:"https://orange.api.spiget.org",apiKey:void 0},{name:"cyan",color:"cyan",url:"https://cyan.api.spiget.org",apiKey:void 0},{name:"black",color:"black",url:"https://black.api.spiget.org",apiKey:void 0},{name:"purple",color:"purple",url:"https://purple.api.spiget.org",
apiKey:void 0},{name:"turquoise",color:"turquoise",url:"https://turquoise.api.spiget.org",apiKey:void 0},{name:"violet",color:"violet",url:"https://violet.api.spiget.org",apiKey:void 0}],checkServers:function(){var a=0;$.each(window.SpigetStatus.servers,function(d,b){var e=$("<div style='color:darkgray;' class='server'></div>"),c=$("<a href='#' target='_blank'></a>"),f=$("<i style='color:gray;' class='glyphicon'></i>");f.appendTo(c);c.appendTo(e);e.appendTo($("#serverContainer"));e.css("background",
b.color);window.SpigetStatus.display.checking(f);c.attr("title",b.name);c.attr("href",b.url);b.apiKey?$.ajax({url:"https://api.uptimerobot.com/getMonitors?format=json&noJsonCallback=1&apiKey="+b.apiKey,dataType:"json",success:function(b){console.log(b);2>=b.monitors.monitor[0].status?(window.SpigetStatus.display.up(f),a++,window.SpigetStatus.refreshGlobalStatus(a)):window.SpigetStatus.display.down(f)},error:function(a,b,c){window.SpigetStatus.display.down(f);console.log(c)}}):(console.warn("Server "+
b.name+" does not have an API-Key"),setTimeout(function(){window.SpigetStatus.display.down(f)},Math.floor(1500*Math.random())+500));b.url&&$.ajax({url:b.url+"/v2/status?callback=?",dataType:"jsonp",success:function(a){e.addClass("mode-"+a.status.server.mode)}})})},refreshGlobalStatus:function(a){$("#api-status").text(a+"/"+window.SpigetStatus.servers.length+" servers online");a>=window.SpigetStatus.servers.length?($("#api-status-panel").removeClass("panel-warning"),$("#api-status-panel").removeClass("panel-danger"),
$("#api-status-panel").addClass("panel-success"),$("#api-status").text("All servers online!")):0>=a&&($("#api-status-panel").removeClass("panel-warning"),$("#api-status-panel").addClass("panel-danger"),$("#api-status").text("All servers are offline"))},checkFetcher:function(){$.ajax({url:"https://api.spiget.org/v2/status",dataType:"jsonp",success:function(a){a.status.fetch.active?($("#fetcher-status").html("The API is <span class='fetcher-updating'>currently updating</span>"),$("#fetcher-details").html("The update started <span class='time'>"+
moment(a.status.fetch.start).fromNow()+"</span>")):($("#fetcher-status").html("The API is <span class='fetcher-updated'>up to date</span>"),$("#fetcher-details").html("It was last updated <span class='time'>"+moment(a.status.fetch.start).fromNow()+"</span>"))}})},drawCharts:function(){var a=function(){var a=[],b=this.points.sort(function(a,b){return a.y>b.y?-1:a.y<b.y?1:0});$.each(b,function(b,c){a.push('<span style="color:'+c.series.color+';">'+c.series.name+"</span>: <strong>"+Highcharts.numberFormat(c.y,
-1)+"</strong>")});b='<span style="font-size:12px" class="text-muted">'+moment(this.x).format("dddd, MMMM Do YYYY - HH:00")+"</span><br/>";return b+=a.join("<br/>")};$.ajax({url:"https://api.spiget.org/v2/metrics/requests-new/30",dataType:"jsonp",success:function(d){console.log(d);var b={total:[],unique:[]},e={Spiget:[]};$.each(d,function(a,c){var d=1E3*c.timestamp;b.total.push([d,c.total]);b.unique.push([d,c.unique]);$.each(c.userAgents,function(a,b){void 0===e[a]&&(e[a]=[]);e[a].push([d,b])})});
d=[{name:"total",color:"black",data:b.total},{name:"unique",color:"blue",visible:!1,data:b.unique},{name:"trend",color:"gray",data:fitData(b.total).data}];var c=[];$.each(e,function(a,b){c.push({name:a,data:b})});$("#daily_requests_graph").highcharts({chart:{type:"spline",zoomType:"x",height:500},legend:{enabled:!0},plotOptions:{series:{marker:{enabled:!1,symbol:"circle",states:{hover:{enabled:!0}}}}},title:{text:"Daily Requests"},xAxis:{type:"datetime"},yAxis:{title:{text:"Number of Requests"}},
tooltip:{backgroundColor:{linearGradient:[0,0,0,60],stops:[[0,"#FFFFFF"],[1,"#E0E0E0"]]},crossshairs:[!0,!0],shared:!0,followPointer:!0,followTouchMove:!0,formatter:a,useHTML:!0},series:d});$("#user_agent_requests_graph").highcharts({chart:{type:"spline",zoomType:"x",height:800},legend:{enabled:!0},plotOptions:{series:{marker:{enabled:!1,symbol:"circle",states:{hover:{enabled:!0}}}}},title:{text:"Requests per User-Agent"},xAxis:{type:"datetime"},yAxis:{title:{text:"Number of Requests"},min:0},tooltip:{backgroundColor:{linearGradient:[0,
0,0,60],stops:[[0,"#FFFFFF"],[1,"#E0E0E0"]]},crossshairs:[!0,!0],shared:!0,followPointer:!0,followTouchMove:!0,formatter:a,useHTML:!0},series:c})}})}};
