angular.module("searchApp",[]).controller("SearchController",["$scope",function(d){var a=this;a.type=type;a.query=query;a.limit=void 0!=limit&&0<limit?limit:10;a.resultSize=0;a.doSearch=function(){if(1<a.query.length){if(void 0==a.limit||0>a.limit)a.limit=10;$(".loading-icon").fadeIn();$("#raw-result-container").empty();$("#result-container").empty();window.history.pushState("","","/search/"+a.type+":"+a.query+"/"+a.limit);a.resultSize=0;$.ajax({url:"https://api.spiget.org/v2/search/"+a.type+"/"+
a.query+"?spiget___ua=SpigetSearch&size="+a.limit+"&callback=?",dataType:"jsonp",success:function(c){$(".loading-icon").fadeOut();Alert.alert("success","",!1);a.resultSize=c.length;a.apply();$("#raw-result-container").html("<pre>"+JSON.stringify(c,null,4)+"</pre>");$container=$("#result-container");$container.empty();$.each(c,function(c,b){$container.append("<div class='panel panel-info resource-panel'>\t<div class='panel-heading'>\t\t<a href='https://api.spiget.org/v2/"+a.type+"/"+b.id+"/go' target='_blank'>"+
b.name+"</a><span class='pull-right text-muted'>#"+b.id+"</span>\t</div>"+("resources"==a.type?"\t<div class='panel-body'>\t\t<span>"+b.tag+"</span>\t</div>":"")+"</div><br/>")})},error:function(a){$(".loading-icon").fadeOut();console.log(a);404==a.status?Alert.alert("warning","Nothing found",!0):Alert.alert("danger","Search failed",!0)}})}};var b=-1;a.delayedSearch=function(){-1!=b&&clearTimeout(b);b=setTimeout(function(){a.doSearch();b=-1},250)};a.apply=function(){d.$apply()};(function(){setTimeout(function(){a.doSearch()},
500)})()}]);
