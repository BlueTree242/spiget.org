angular.module("searchApp",[]).controller("SearchController",["$scope",function(e){var i=this;i.type=type,i.query=query,i.limit=null!=limit&&0<limit?limit:10,i.resultSize=0,i.doSearch=function(){1<i.query.length&&((null==i.limit||i.limit<0)&&(i.limit=10),$(".loading-icon").fadeIn(),$("#raw-result-container").empty(),$("#result-container").empty(),window.history.pushState("","","/search/"+i.type+":"+i.query+"/"+i.limit),i.resultSize=0,$.ajax({url:"https://api.spiget.org/v2/search/"+i.type+"/"+i.query+"?spiget___ua=SpigetSearch&size="+i.limit+"&callback=?",success:function(e){$(".loading-icon").fadeOut(),Alert.alert("success","",!1),i.resultSize=e.length,i.apply(),$("#raw-result-container").html("<pre>"+JSON.stringify(e,null,4)+"</pre>"),$container=$("#result-container"),$container.empty(),$.each(e,function(e,t){$container.append("<div class='panel panel-info resource-panel'>\t<div class='panel-heading'>\t\t<a href='https://api.spiget.org/v2/"+i.type+"/"+t.id+"/go' target='_blank'>"+(i.type,t.name)+"</a><span class='pull-right text-muted'>#"+t.id+"</span>\t</div>"+("resources"==i.type?"\t<div class='panel-body'>\t\t<span>"+t.tag+"</span>\t</div>":"")+"</div><br/>")})},error:function(e){$(".loading-icon").fadeOut(),console.log(e),404==e.status?Alert.alert("warning","Nothing found",!0):Alert.alert("danger","Search failed",!0)}}))};var t=-1;i.delayedSearch=function(){-1!=t&&clearTimeout(t),t=setTimeout(function(){i.doSearch(),t=-1},250)},i.apply=function(){e.$apply()},setTimeout(function(){i.doSearch()},500)}]);